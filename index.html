<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Link Opener Example</title>
<script>
function openLinkOrSwitchTab(url) {
  // 尝试打开新标签页
  var newWindow = window.open(url, '_blank');

  // 检查新打开的窗口是否被浏览器拦截
  if (newWindow) {
    // 如果没有被拦截，聚焦到新打开的标签页
    newWindow.focus();
  } else {
    // 如果被拦截，尝试查找已打开的同源标签页
    var found = false;
    for (var i = 0; i < window.length; i++) {
      if (window[i].location.href === url && window[i] !== window.self) {
        window[i].focus();
        found = true;
        break;
      }
    }
    // 如果没有找到已打开的标签页，尝试在当前窗口打开链接
    if (!found) {
      window.location.href = url;
    }
  }
}
</script>
</head>
<body>

<h2>Link Opener Example</h2>

<!-- 链接按钮，点击时调用openLinkOrSwitchTab函数 -->
<button onclick="openLinkOrSwitchTab('http://example.com/some-page')">Open Link or Switch Tab</button>

</body>
</html>
